# 2026-01-06 | FCM Background Notification Fix - Plan

## ëª©í‘œ
ë°±ê·¸ë¼ìš´ë“œâ†’í¬ê·¸ë¼ìš´ë“œ ì „í™˜ ì‹œ FCM ì•Œë¦¼ íƒ­ìœ¼ë¡œ ì±„íŒ…ë°© ì´ë™ì´ ì•ˆ ë˜ëŠ” ë¬¸ì œ í•´ê²°

## ë¬¸ì œ ë¶„ì„

### í˜„ìƒ
```
ì‚¬ìš©ì ë³´ê³ :
- ì•±ì´ ë°±ê·¸ë¼ìš´ë“œì— ìˆì„ ë•Œ ì±„íŒ… ì•Œë¦¼ ìˆ˜ì‹ 
- ì•Œë¦¼ì„ íƒ­í•˜ë©´ ì•±ì´ í¬ê·¸ë¼ìš´ë“œë¡œ ì „í™˜ë¨
- âŒ ì±„íŒ…ë°©ìœ¼ë¡œ ì´ë™í•˜ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ë©ˆì¶¤
```

### ë¡œê·¸ ë¶„ì„ (1ì°¨ ì‹œë„)
```
flutter: ğŸ”— ì±„íŒ… í™”ë©´ìœ¼ë¡œ ì´ë™: productId=204, chatRoomId=5
flutter: âš ï¸ GoRouterê°€ ì„¤ì •ë˜ì§€ ì•Šì•„ ì±„íŒ… í™”ë©´ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤
```

**ë°œê²¬**:
- `handleNotificationTap()` ë©”ì„œë“œëŠ” í˜¸ì¶œë¨
- ê·¸ëŸ¬ë‚˜ `_router`ê°€ null ìƒíƒœ

### ê·¼ë³¸ ì›ì¸ ë¶„ì„

#### ì›ì¸ 1: ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì‹œì  ë¬¸ì œ
**í˜„ì¬ ì½”ë“œ êµ¬ì¡°**:
```dart
// FCMService.initialize() - ë¡œê·¸ì¸ í›„ í˜¸ì¶œë¨
Future<void> initialize({GoRouter? router}) async {
  // í¬ê·¸ë¼ìš´ë“œ ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆ
  FirebaseMessaging.onMessage.listen(...);

  // ë°±ê·¸ë¼ìš´ë“œâ†’í¬ê·¸ë¼ìš´ë“œ ë¦¬ìŠ¤ë„ˆ (ì—¬ê¸°ê°€ ë¬¸ì œ!)
  FirebaseMessaging.onMessageOpenedApp.listen(...);
}
```

**ë¬¸ì œì **:
1. `initialize()`ëŠ” **ë¡œê·¸ì¸ í›„**ì— í˜¸ì¶œë¨
2. ë°±ê·¸ë¼ìš´ë“œâ†’í¬ê·¸ë¼ìš´ë“œ ì•Œë¦¼ íƒ­ì€ **ë¡œê·¸ì¸ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´** ë°œìƒ
3. ë¡œê·¸ì¸ ì „ ë˜ëŠ” `initialize()` í˜¸ì¶œ ì „ì— ì•Œë¦¼ íƒ­ ì‹œ ì´ë²¤íŠ¸ë¥¼ ë†“ì¹¨

#### ì›ì¸ 2: GoRouter null ìƒíƒœ
**íƒ€ì´ë° ì‹œí€€ìŠ¤**:
```
1. ì•± ì‹œì‘
2. initState() ì‹¤í–‰
3. addPostFrameCallback ë“±ë¡
4. (ì‚¬ìš©ìê°€ ë°±ê·¸ë¼ìš´ë“œë¡œ ì „í™˜)
5. ì•Œë¦¼ ìˆ˜ì‹ 
6. ì‚¬ìš©ìê°€ ì•Œë¦¼ íƒ­
7. onMessageOpenedApp ì´ë²¤íŠ¸ ë°œìƒ
8. (íƒ€ì´ë°ì— ë”°ë¼) FcmService._routerê°€ ì•„ì§ nullì¼ ìˆ˜ ìˆìŒ
```

**ì½”ë“œ íë¦„**:
```dart
// main.dart - initState()
WidgetsBinding.instance.addPostFrameCallback((_) {
  FcmService.instance.setRouter(router);  // ì—¬ê¸°ì„œ ì„¤ì •
});

// FCMService.initialize()
FirebaseMessaging.onMessageOpenedApp.listen((message) {
  handleNotificationTap(message);  // _routerë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•¨
});
```

**ë¬¸ì œ**:
- `onMessageOpenedApp` ë¦¬ìŠ¤ë„ˆê°€ `initialize()` ì•ˆì— ìˆìŒ
- í•˜ì§€ë§Œ `_router` ì„¤ì •ì€ `main.dart`ì˜ `addPostFrameCallback`ì—ì„œ
- ë‘ ì‘ì—…ì˜ ìˆœì„œê°€ ë³´ì¥ë˜ì§€ ì•ŠìŒ

## í•´ê²° ì „ëµ

### ì „ëµ 1: ë¦¬ìŠ¤ë„ˆë¥¼ main.dartë¡œ ì´ë™ â­ (ì±„íƒ)
**ì¥ì **:
- ì•± ì‹œì‘ ì§í›„ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
- ë¡œê·¸ì¸ ì—¬ë¶€ì™€ ë¬´ê´€í•˜ê²Œ ì‘ë™
- íƒ€ì´ë° ì´ìŠˆ í•´ê²°

**ë‹¨ì **:
- FCM ê´€ë ¨ ë¡œì§ì´ ì—¬ëŸ¬ ê³³ì— ë¶„ì‚°ë¨
- main.dartê°€ FCMì— ì˜ì¡´í•˜ê²Œ ë¨

**í‰ê°€**: âœ… ê°€ì¥ í™•ì‹¤í•œ í•´ê²°ì±…

### ì „ëµ 2: setRouterë¥¼ ë™ê¸°ì ìœ¼ë¡œ í˜¸ì¶œ
**ë°©ë²•**: `addPostFrameCallback` ëŒ€ì‹  `initState`ì—ì„œ ì§ì ‘ í˜¸ì¶œ

**ë¬¸ì œ**:
- ë¼ìš°í„°ê°€ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆìŒ
- GoRouter ì´ˆê¸°í™” íƒ€ì´ë° ì´ìŠˆ

**í‰ê°€**: âŒ ë‹¤ë¥¸ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥

### ì „ëµ 3: handleNotificationTapì— router íŒŒë¼ë¯¸í„° ì¶”ê°€ â­ (ì¶”ê°€ ì±„íƒ)
**ë°©ë²•**: ë¼ìš°í„°ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì§ì ‘ ì „ë‹¬

```dart
void handleNotificationTap(RemoteMessage message, {GoRouter? router}) {
  final targetRouter = router ?? _router;
  // ...
}
```

**ì¥ì **:
- íƒ€ì´ë° ì´ìŠˆ ì™„ì „ í•´ê²°
- Null ì•ˆì „ì„± ë³´ì¥
- ëª…ì‹œì ì´ê³  ëª…í™•í•¨

**í‰ê°€**: âœ… ì „ëµ 1ê³¼ í•¨ê»˜ ì‚¬ìš©

### ì „ëµ 4: ë¼ìš°í„° ì¤€ë¹„ê¹Œì§€ ëŒ€ê¸°
**ë°©ë²•**: while ë£¨í”„ë¡œ `_router != null`ê¹Œì§€ ëŒ€ê¸°

**ë¬¸ì œ**:
- ë¸”ë¡œí‚¹ ë°©ì‹ì€ ì¢‹ì§€ ì•ŠìŒ
- ë¬´í•œ ë£¨í”„ ê°€ëŠ¥ì„±
- ì‚¬ìš©ì ê²½í—˜ ì €í•˜

**í‰ê°€**: âŒ ê¶Œì¥í•˜ì§€ ì•ŠìŒ

## êµ¬í˜„ ê³„íš

### Phase 1: ë¦¬ìŠ¤ë„ˆë¥¼ main.dartë¡œ ì´ë™ âœ“
**íŒŒì¼**: `lib/main.dart`

**ì¶”ê°€í•  ë©”ì„œë“œ**:
```dart
/// ë°±ê·¸ë¼ìš´ë“œâ†’í¬ê·¸ë¼ìš´ë“œ ì•Œë¦¼ íƒ­ í•¸ë“¤ëŸ¬ ì„¤ì •
void _setupBackgroundNotificationHandler(GoRouter router) {
  FirebaseMessaging.onMessageOpenedApp.listen((message) {
    debugPrint('ğŸ“± [ë°±ê·¸ë¼ìš´ë“œâ†’í¬ê·¸ë¼ìš´ë“œ] FCM ì•Œë¦¼ìœ¼ë¡œ ì•± ì—´ë¦¼');
    FcmService.instance.handleNotificationTap(message);
  });
}
```

**initState()ì—ì„œ í˜¸ì¶œ**:
```dart
@override
void initState() {
  super.initState();
  WidgetsBinding.instance.addPostFrameCallback((_) {
    final router = ref.read(routerProvider);
    // ... ê¸°ì¡´ ì´ˆê¸°í™”
    _setupBackgroundNotificationHandler(router);  // ì¶”ê°€
  });
}
```

**ì˜ˆìƒ ê²°ê³¼**:
- ì•± ì‹œì‘ ì§í›„ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
- ë¡œê·¸ì¸ ì—¬ë¶€ì™€ ë¬´ê´€í•˜ê²Œ ì‘ë™

### Phase 2: FCMServiceì—ì„œ ì¤‘ë³µ ë¦¬ìŠ¤ë„ˆ ì œê±° âœ“
**íŒŒì¼**: `lib/shared/service/fcm_service.dart`

**ì œê±°í•  ì½”ë“œ**:
```dart
// ì‚­ì œ
FirebaseMessaging.onMessageOpenedApp.listen((message) {
  handleNotificationTap(message);
});
```

**ì£¼ì„ ì¶”ê°€**:
```dart
// ë°±ê·¸ë¼ìš´ë“œâ†’í¬ê·¸ë¼ìš´ë“œ ì•Œë¦¼ íƒ­ ì²˜ë¦¬ëŠ” main.dartì—ì„œ ì²˜ë¦¬
// (ë¡œê·¸ì¸ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ì•± ì‹œì‘ ì‹œì ì— ë¦¬ìŠ¤ë„ˆ ë“±ë¡ë˜ì–´ì•¼ í•˜ë¯€ë¡œ)
```

**ì˜ˆìƒ ê²°ê³¼**:
- ì¤‘ë³µ ë¦¬ìŠ¤ë„ˆ ë°©ì§€
- ì—­í•  ë¶„ë¦¬ ëª…í™•í™”

### Phase 3: GoRouter íŒŒë¼ë¯¸í„° ì¶”ê°€ âœ“
**íŒŒì¼**: `lib/shared/service/fcm_service.dart`

**ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ ë³€ê²½**:
```dart
// Before
void handleNotificationTap(RemoteMessage message)

// After
void handleNotificationTap(RemoteMessage message, {GoRouter? router})
```

**ë‚´ë¶€ ë¡œì§**:
```dart
final targetRouter = router ?? _router;
if (targetRouter != null) {
  targetRouter.push(...);
}
```

**í˜¸ì¶œ ë¶€ë¶„ ìˆ˜ì •** (`main.dart`):
```dart
// ë°±ê·¸ë¼ìš´ë“œâ†’í¬ê·¸ë¼ìš´ë“œ
final currentRouter = ref.read(routerProvider);
FcmService.instance.handleNotificationTap(message, router: currentRouter);

// ì•± ì¢…ë£Œ ìƒíƒœ
final router = ref.read(routerProvider);
FcmService.instance.handleNotificationTap(initialMessage, router: router);
```

**ì˜ˆìƒ ê²°ê³¼**:
- GoRouter null ì´ìŠˆ ì™„ì „ í•´ê²°
- í•­ìƒ ìµœì‹  ë¼ìš°í„° ì‚¬ìš©

### Phase 4: í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
**í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**:
1. âœ“ ì•± ì¢…ë£Œ â†’ ì•Œë¦¼ íƒ­ â†’ ì±„íŒ…ë°© ì´ë™
2. âš  ë°±ê·¸ë¼ìš´ë“œ â†’ ì•Œë¦¼ íƒ­ â†’ ì±„íŒ…ë°© ì´ë™ (ë¬¸ì œ ë°œìƒ)
3. âœ“ í¬ê·¸ë¼ìš´ë“œ â†’ ì•Œë¦¼ ìˆ˜ì‹  â†’ ì½œë°± í˜¸ì¶œ

**ê²€ì¦ ë°©ë²•**:
- ê° ì‹œë‚˜ë¦¬ì˜¤ë³„ ë¡œê·¸ í™•ì¸
- ì‹¤ì œ ë””ë°”ì´ìŠ¤ì—ì„œ í…ŒìŠ¤íŠ¸
- ë‹¤ì–‘í•œ ì•± ìƒíƒœì—ì„œ í…ŒìŠ¤íŠ¸

## ì˜ˆìƒ ê²°ê³¼

### Before (ë¬¸ì œ)
```
ì‚¬ìš©ì í–‰ë™: ë°±ê·¸ë¼ìš´ë“œ ì•±ì—ì„œ ì•Œë¦¼ íƒ­
â†“
onMessageOpenedApp ì´ë²¤íŠ¸ ë°œìƒ
â†“
âŒ ë¦¬ìŠ¤ë„ˆ ë¯¸ë“±ë¡ ë˜ëŠ” _router null
â†“
ì•±ë§Œ í¬ê·¸ë¼ìš´ë“œë¡œ ì „í™˜
```

### After (í•´ê²°)
```
ì•± ì‹œì‘ â†’ âœ… ë¦¬ìŠ¤ë„ˆ ë“±ë¡ (main.dart)
â†“
ì‚¬ìš©ì í–‰ë™: ë°±ê·¸ë¼ìš´ë“œ ì•±ì—ì„œ ì•Œë¦¼ íƒ­
â†“
onMessageOpenedApp ì´ë²¤íŠ¸ ë°œìƒ
â†“
âœ… ë¦¬ìŠ¤ë„ˆ í˜¸ì¶œ (ë¼ìš°í„° ì§ì ‘ ì „ë‹¬)
â†“
âœ… ì±„íŒ…ë°©ìœ¼ë¡œ ì´ë™
```

## ê³ ë ¤ì‚¬í•­

### 1. Firebase Messaging ì´ë²¤íŠ¸ ì¢…ë¥˜
| ì´ë²¤íŠ¸ | ì„¤ëª… | ë“±ë¡ ì‹œì  | ì²˜ë¦¬ ìœ„ì¹˜ |
|--------|------|----------|----------|
| `getInitialMessage()` | ì•± ì¢…ë£Œ â†’ ì•Œë¦¼ íƒ­ â†’ ì•± ì‹œì‘ | ì–¸ì œë“ ì§€ | main.dart |
| `onMessageOpenedApp` | ë°±ê·¸ë¼ìš´ë“œ â†’ ì•Œë¦¼ íƒ­ | **ì•± ì‹œì‘ ì§í›„** | main.dart â­ |
| `onMessage` | í¬ê·¸ë¼ìš´ë“œ ì•Œë¦¼ ìˆ˜ì‹  | ë¡œê·¸ì¸ í›„ ê°€ëŠ¥ | fcm_service.dart |
| `onBackgroundMessage` | ë°±ê·¸ë¼ìš´ë“œ ì•Œë¦¼ ìˆ˜ì‹  | main() | main.dart |

### 2. ë¦¬ìŠ¤ë„ˆ ì¤‘ë³µ ë“±ë¡ ë°©ì§€
- `onMessageOpenedApp`ì€ í•œ ë²ˆë§Œ ë“±ë¡ë˜ì–´ì•¼ í•¨
- ì—¬ëŸ¬ ë²ˆ ë“±ë¡í•˜ë©´ í•¸ë“¤ëŸ¬ê°€ ì¤‘ë³µ í˜¸ì¶œë¨
- main.dartì—ì„œë§Œ ë“±ë¡

### 3. ë¼ìš°í„° íŒŒë¼ë¯¸í„° vs ì „ì—­ ì„¤ì •
**íŒŒë¼ë¯¸í„° ë°©ì‹ (ì±„íƒ)**:
```dart
handleNotificationTap(message, router: currentRouter)
```
- âœ… íƒ€ì´ë° ì´ìŠˆ ì—†ìŒ
- âœ… Null ì•ˆì „
- âœ… ëª…ì‹œì 

**ì „ì—­ ì„¤ì • ë°©ì‹**:
```dart
setRouter(router)
handleNotificationTap(message)
```
- âŒ íƒ€ì´ë° ì´ìŠˆ ê°€ëŠ¥
- âŒ Null ì²´í¬ í•„ìš”
- âœ… ì½”ë“œ ê°„ê²°

### 4. ì•± ìƒíƒœë³„ ì²˜ë¦¬
| ì•± ìƒíƒœ | ì´ë²¤íŠ¸ | ì²˜ë¦¬ ë°©ë²• |
|---------|--------|----------|
| ì¢…ë£Œ | `getInitialMessage()` | main.dart `_handleInitialMessage()` |
| ë°±ê·¸ë¼ìš´ë“œ | `onMessageOpenedApp` | main.dart `_setupBackgroundNotificationHandler()` |
| í¬ê·¸ë¼ìš´ë“œ | `onMessage` | fcm_service.dart (ì½œë°±ë§Œ) |

## ìœ„í—˜ ìš”ì†Œ

### 1. ë‹¤ë¥¸ ì•Œë¦¼ íƒ€ì… ì˜í–¥
- í˜„ì¬: `chat_message`, `review_received`
- ìœ„í—˜: ìƒˆë¡œìš´ ì•Œë¦¼ íƒ€ì… ì¶”ê°€ ì‹œ ëˆ„ë½ ê°€ëŠ¥
- ì™„í™”: `handleNotificationTap()`ì´ ëª¨ë“  íƒ€ì… ì²˜ë¦¬

### 2. GoRouter ë³€ê²½ ì˜í–¥
- ìœ„í—˜: GoRouter API ë³€ê²½ ì‹œ ì˜í–¥
- ì™„í™”: íŒŒë¼ë¯¸í„° ë°©ì‹ì´ë¯€ë¡œ ì˜í–¥ ìµœì†Œí™”

### 3. ì„±ëŠ¥ ì˜í–¥
- ë¦¬ìŠ¤ë„ˆ ë“±ë¡: ì•± ì‹œì‘ ì‹œ 1íšŒ (ë¬´ì‹œí•  ìˆ˜ì¤€)
- ë¼ìš°í„° ì½ê¸°: `ref.read()` (O(1))
- ì „ì²´ ì˜í–¥: ë¬´ì‹œí•  ìˆ˜ ìˆìŒ

## ëŒ€ì•ˆ ê²€í† 

### ëŒ€ì•ˆ 1: UniLinks ì‚¬ìš©
**ë°©ë²•**: FCM ëŒ€ì‹  Universal Links ì‚¬ìš©

**ë¬¸ì œ**:
- ì™„ì „íˆ ë‹¤ë¥¸ ì‹œìŠ¤í…œ
- ì„œë²„ ì„¤ì • í•„ìš”
- FCM ì¥ì  ìƒì‹¤

**ê²°ë¡ **: âŒ ê³¼ë„í•œ ë³€ê²½

### ëŒ€ì•ˆ 2: Local Notification ì‚¬ìš©
**ë°©ë²•**: FCM ìˆ˜ì‹  í›„ ë¡œì»¬ ì•Œë¦¼ ìƒì„±

**ë¬¸ì œ**:
- ì•Œë¦¼ ì¤‘ë³µ
- ë³µì¡ë„ ì¦ê°€
- ì‚¬ìš©ì ê²½í—˜ ì €í•˜

**ê²°ë¡ **: âŒ ë¶ˆí•„ìš”

### ëŒ€ì•ˆ 3: GetIt ê°™ì€ ì„œë¹„ìŠ¤ ë¡œì¼€ì´í„°
**ë°©ë²•**: GoRouterë¥¼ ì „ì—­ìœ¼ë¡œ ê´€ë¦¬

**ë¬¸ì œ**:
- Riverpodì™€ ì¶©ëŒ ê°€ëŠ¥
- ì•„í‚¤í…ì²˜ ì¼ê´€ì„± ì €í•´

**ê²°ë¡ **: âŒ ê¶Œì¥í•˜ì§€ ì•ŠìŒ

### ëŒ€ì•ˆ 4: í˜„ì¬ í•´ê²°ì±… (ì±„íƒ)
**ë°©ë²•**: ë¦¬ìŠ¤ë„ˆ ì´ë™ + íŒŒë¼ë¯¸í„° ì „ë‹¬

**ì¥ì **:
- ìµœì†Œ ë³€ê²½
- ëª…í™•í•˜ê³  ì•ˆì „
- ê¸°ì¡´ ì•„í‚¤í…ì²˜ ìœ ì§€

**ê²°ë¡ **: âœ… ìµœì„ 

## ê²€ì¦ ê³„íš

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- [ ] `handleNotificationTap()` íŒŒë¼ë¯¸í„° ì „ë‹¬ í…ŒìŠ¤íŠ¸
- [ ] router null ì‹œ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- [ ] ê° ì•Œë¦¼ íƒ€ì…ë³„ ê²½ë¡œ ìƒì„± í…ŒìŠ¤íŠ¸

### í†µí•© í…ŒìŠ¤íŠ¸
- [x] ì•± ì¢…ë£Œ â†’ ì•Œë¦¼ íƒ­
- [x] ë°±ê·¸ë¼ìš´ë“œ â†’ ì•Œë¦¼ íƒ­ â­
- [x] í¬ê·¸ë¼ìš´ë“œ â†’ ì•Œë¦¼ ìˆ˜ì‹ 

### ìˆ˜ë™ í…ŒìŠ¤íŠ¸
- [x] iOS ì‹œë®¬ë ˆì´í„°
- [ ] Android ì—ë®¬ë ˆì´í„°
- [ ] ì‹¤ì œ ë””ë°”ì´ìŠ¤ (iOS)
- [ ] ì‹¤ì œ ë””ë°”ì´ìŠ¤ (Android)

### ì—£ì§€ ì¼€ì´ìŠ¤
- [ ] ì•Œë¦¼ ì—°ì† íƒ­
- [ ] ì•± ì¢…ë£Œ â†’ ë¹ ë¥¸ ì•Œë¦¼ íƒ­
- [ ] ë¡œê·¸ì¸ ì „ ì•Œë¦¼ íƒ­
- [ ] ë„¤íŠ¸ì›Œí¬ ëŠê¹€ ìƒíƒœ

## íƒ€ì„ë¼ì¸
- âœ… ë¬¸ì œ ë¶„ì„: 20ë¶„
- âœ… í•´ê²° ë°©ë²• ì„¤ê³„: 15ë¶„
- âœ… Phase 1 êµ¬í˜„: 10ë¶„
- âœ… Phase 2 êµ¬í˜„: 5ë¶„
- âœ… Phase 3 êµ¬í˜„: 10ë¶„
- â³ Phase 4 í…ŒìŠ¤íŠ¸: 15ë¶„
- â³ ë¬¸ì„œí™”: 10ë¶„

**ì˜ˆìƒ ì´ ì†Œìš” ì‹œê°„**: ì•½ 1.5ì‹œê°„

## ê²°ë¡ 

### ì±„íƒí•œ í•´ê²°ì±…
1. **ë¦¬ìŠ¤ë„ˆë¥¼ main.dartë¡œ ì´ë™**: ë¡œê·¸ì¸ ì—¬ë¶€ì™€ ë¬´ê´€í•˜ê²Œ ì•± ì‹œì‘ ì‹œ ë“±ë¡
2. **GoRouter íŒŒë¼ë¯¸í„° ì¶”ê°€**: íƒ€ì´ë° ì´ìŠˆ ì™„ì „ í•´ê²°
3. **ì¤‘ë³µ ë¦¬ìŠ¤ë„ˆ ì œê±°**: ì—­í•  ë¶„ë¦¬ ëª…í™•í™”

### ê¸°ëŒ€ íš¨ê³¼
- âœ… ë°±ê·¸ë¼ìš´ë“œâ†’í¬ê·¸ë¼ìš´ë“œ ì•Œë¦¼ íƒ­ ì •ìƒ ì‘ë™
- âœ… GoRouter null ì´ìŠˆ í•´ê²°
- âœ… ì½”ë“œ ì•ˆì •ì„± í–¥ìƒ
- âœ… ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

### í•™ìŠµ í¬ì¸íŠ¸
1. **Firebase Messaging ì´ë²¤íŠ¸ íƒ€ì´ë°**: `onMessageOpenedApp`ì€ ì•± ì‹œì‘ ì§í›„ ë“±ë¡ í•„ìš”
2. **Riverpod + ë¹„ë™ê¸° ì´ˆê¸°í™”**: `ref.read()`ë¡œ ìµœì‹  ìƒíƒœ ì½ê¸°
3. **íŒŒë¼ë¯¸í„° ì „ë‹¬ vs ì „ì—­ ìƒíƒœ**: ëª…ì‹œì  íŒŒë¼ë¯¸í„°ê°€ ë” ì•ˆì „
4. **ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ìœ„ì¹˜**: ì•± ìƒëª…ì£¼ê¸° ê³ ë ¤ í•„ìš”
